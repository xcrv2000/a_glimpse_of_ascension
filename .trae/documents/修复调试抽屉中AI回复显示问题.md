## 修复方案

### 问题分析
调试抽屉中阶段一的输出没有正确显示完整的AI回复，包括秘密信息。原因是当前流程中，AI回复先被解析分离出故事和秘密信息，然后才构建调试数据，导致原始完整回复丢失。

### 修复计划
1. **修改 `PromptBuilder_Storyteller.sendApiRequest` 方法**
   - 在调用 `parseResponse` 方法之前，保存完整的AI回复
   - 确保调试数据中存储的是原始完整的AI回复

2. **修改 `callStorytellerAPI` 函数**
   - 调整调试数据的保存时机，确保先保存完整回复，再进行解析
   - 简化调试数据的构建逻辑，直接使用完整的AI回复

3. **验证修复效果**
   - 确保阶段一的调试输出显示完整的AI回复，包括秘密信息
   - 确保阶段二的处理流程不受影响

### 预期效果
- 调试抽屉中阶段一的输出将显示完整的AI回复，包括故事内容和秘密信息
- 保持现有的故事生成和处理逻辑不变
- 阶段二的处理流程继续正常工作

### 代码修改点
1. `src/js/promptBuilder_storyteller.js` - 调整 `sendApiRequest` 方法的处理顺序
2. `chat.html` - 调整 `callStorytellerAPI` 函数的调试数据保存逻辑