## 1. 问题分析

* **核心问题**：prompt_recorder.json中的部分系统说明与engine.js中的实际处理逻辑不一致

* **具体表现**：

  1. **终幕触发条件**：
     - prompt_recorder.json：故事时间线推进到1929年，或故事总字数超过10万字
     - engine.js：故事时间线推进到1929年，或故事总字数超过30万字

  2. **游戏资产系统**：
     - prompt_recorder.json：使用"添加资产"、"删除资产"、"更新资产"等术语
     - engine.js：只处理"addProperty"、"removeProperty"、"updateProperty"请求类型

## 2. 修复计划

### 2.1 更新终幕触发条件

* **将第54行的终幕触发条件更新为**：
  - 原：`- **触发条件**：当故事时间线推进到1929年，或故事总字数超过10万字时，系统会自动进入终幕`
  - 新：`- **触发条件**：当故事时间线推进到1929年，或故事总字数超过30万字时，系统会自动进入终幕`

### 2.2 更新游戏资产系统术语

* **将第251-255行的"添加资产"改为"添加财产"**：
  - 原：`添加资产：{"name":"资产名称","description":"资产描述","owner":"所属者"}`
  - 新：`添加财产：{"name":"财产名称","description":"财产描述","owner":"所属者"}`

* **将第275-279行的"删除资产"改为"删除财产"**：
  - 原：`删除资产：资产名称`
  - 新：`删除财产：财产名称`

* **将第299-303行的"更新资产"改为"更新财产"**：
  - 原：`更新资产：{"name":"资产名称","description":"资产描述","owner":"所属者"}`
  - 新：`更新财产：{"name":"财产名称","description":"财产描述","owner":"所属者"}`

### 2.3 其他系统的一致性检查

* **景深系统**：说明与引擎处理一致，无需修改
* **时间系统**：说明与引擎处理一致，无需修改
* **事件系统**：说明与引擎处理一致，无需修改
* **伏笔系统**：说明与引擎处理一致，无需修改
* **成就系统**：说明与引擎处理一致，无需修改
* **角色系统**：说明与引擎处理一致，无需修改

## 3. 预期效果

* **文档与代码一致**：prompt_recorder.json中的说明与engine.js中的实际处理逻辑保持一致
* **减少混淆**：避免使用过时的术语，使用统一的术语
* **提高可维护性**：便于后续开发和维护

## 4. 文件修改列表

* `src/data/prompt_recorder.json`：
  - 更新终幕触发条件的字数要求
  - 更新游戏资产系统的操作术语

## 5. 保持responseParser.js的映射关系

* 保持responseParser.js中的映射关系不变，确保旧的请求类型仍然可以正常工作
* 例如：`'添加资产': 'addProperty'`映射关系仍然保留，确保向后兼容
