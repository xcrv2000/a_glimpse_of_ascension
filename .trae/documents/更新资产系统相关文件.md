## 1. 问题分析

* **核心问题**：资产系统命名不一致，存在旧名称残留

* **具体表现**：

  * 数据结构：`assets` 包含 `items`, `property`, `knowledge`, `locations`

  * 请求类型：使用 `addItem`, `addAsset`, `addKnowledge`, `addLocation`（`addAsset` 与数据结构中的 `property` 不匹配）

  * 方法名：`addAsset` 实际处理 `property` 数据，命名混淆

  * 验证函数：使用旧的 `Inventory`（背包）命名

  * 提示词：将整个资产系统称为"背包系统"

## 2. 更新计划

### 2.1 统一命名规范

* **核心原则**：请求类型、方法名、数据结构完全一致

* **数据结构**：维持 `assets` 包含 `items`, `property`, `knowledge`, `locations`

* **请求类型**：更新为 `addItem`, `addProperty`, `addKnowledge`, `addLocation`（与数据结构对应）

* **方法名**：更新为 `addItem`, `addProperty`, `addKnowledge`, `addLocation`（与数据结构对应）

* **验证函数**：使用 `validateAssetAddRequest` 和 `validateAssetRemoveRequest`

### 2.2 更新 engine.js

* **更新请求处理**：

  * 将 `addAsset` 请求类型替换为 `addProperty`

  * 例如：`} else if (request.action === 'addProperty') { await this.addProperty(request.value); }`

* **重命名方法**：

  * 将 `addAsset` 重命名为 `addProperty`

  * 将 `removeAsset` 重命名为 `removeProperty`

  * 将 `updateAsset` 重命名为 `updateProperty`

* **更新所有相关方法**：确保方法名与数据结构一致

### 2.3 更新 responseParser.js

* **重命名验证函数**：

  * 将 `validateInventoryAddRequest` 重命名为 `validateAssetAddRequest`

  * 将 `validateInventoryRemoveRequest` 重命名为 `validateAssetRemoveRequest`

* **更新验证函数调用**：确保所有验证函数调用使用新名称

* **更新请求类型匹配**：确保解析的数据请求类型正确

### 2.4 更新提示词文件

#### 2.4.1 更新 prompt\_recorder.json

* **更新第8.1节描述**：

  * 原："背包系统用于记录玩家当前拥有的物品、资产、知识和地点等信息"

  * 新："游戏资产系统用于记录游戏内的物品、财产、知识和地点等信息"

* **更新资产分类描述**：

  * 原：`- **assets**：财产，如金钱、房产、资源等`

  * 新：`- **property**：财产，如金钱、房产、资源等`

* **更新操作格式**：

  * 原：`添加资产：{...}`

  * 新：`添加财产：{...}`

* **更新所有相关操作描述**：确保请求类型与数据结构一致

#### 2.4.2 更新 promptSimplified.json

* **更新第8节标题**：

  * 原：`### 8. 背包系统`

  * 新：`### 8. 游戏资产系统`

* **更新资产分类描述**：

  * 原：`- **类别**：items（物品）、assets（资产）、knowledge（知识）、locations（地点）`

  * 新：`- **类别**：items（物品）、property（财产）、knowledge（知识）、locations（地点）`

* **更新操作格式**：确保使用正确的请求类型

## 3. 预期效果

* **命名完全一致**：所有文件使用统一的命名规范

* **术语准确性**：

  * 消除旧的"背包"和"Inventory"命名

  * 使用正确的"游戏资产系统"名称

  * 分类名称与数据结构完全对应

* **代码清晰性**：

  * 方法名准确反映处理的数据类型

  * 验证函数名与处理的数据类型匹配

  * 提示词与实际系统行为一致

  * 消除了请求类型与数据结构的不匹配

## 4. 文件修改列表

* `src/js/engine.js`：更新请求处理和方法名

* `src/js/responseParser.js`：更新验证函数名

* `src/data/prompt_recorder.json`：更新资产系统描述和操作格式

* `src/data/promptSimplified.json`：更新资产系统描述和操作格式

